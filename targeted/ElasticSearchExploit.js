var HttpSender = Java.type("org.parosproxy.paros.network.HttpSender");
var Executors = Java.type("java.util.concurrent.Executors");
var executor = Executors.newFixedThreadPool(10);

function invokeWith(msg) {
    for (var i = 0; i < 10; i++) { // Adjust the number of concurrent requests as needed
        executor.execute(function() {
            var clonedMsg = msg.cloneRequest();
            var sender = new HttpSender(HttpSender.MANUAL_REQUEST_INITIATOR);
            sender.sendAndReceive(clonedMsg);
            print(clonedMsg.getResponseBody());
        });
    }
}
